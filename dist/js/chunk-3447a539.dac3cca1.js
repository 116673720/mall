(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3447a539"],{"0ea1":function(e,t,s){},"1d84":function(e,t,s){},2681:function(e,t,s){"use strict";var a=s("3a75"),i=s.n(a);i.a},"3a75":function(e,t,s){},"4d88":function(e,t,s){"use strict";var a=s("1d84"),i=s.n(a);i.a},"5cbe":function(e,t,s){e.exports=s.p+"img/recommend_bg.794b6628.jpg"},b3d7:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"home"}},[s("nav-bar",{staticClass:"home-nav"},[s("div",{attrs:{slot:"center"},slot:"center"},[e._v("购物街")])]),s("tab-control",{directives:[{name:"show",rawName:"v-show",value:e.isTabFixed,expression:"isTabFixed"}],ref:"tabControl1",staticClass:"tab-control",attrs:{titles:["流行","新款","精选"]},on:{tabClick:e.tabClick}}),s("scroll",{ref:"scroll",staticClass:"home-wrapper",attrs:{probeType:3,pullUpLoad:!0},on:{pullingUp:e.loadMore,scroll:e.contentScroll}},[s("HomeSwiper",{attrs:{banners:e.banners},on:{swiperImageLoad:e.swiperImageLoad}}),s("recommend-view",{attrs:{recommend:e.recommend}}),s("feature-view"),s("tab-control",{ref:"tabControl2",staticClass:"tab-control",attrs:{titles:["流行","新款","精选"]},on:{tabClick:e.tabClick}}),s("goods-list",{attrs:{goods:e.showGoods}})],1),s("back-top",{directives:[{name:"show",rawName:"v-show",value:e.isShowBackTop,expression:"isShowBackTop"}],nativeOn:{click:function(t){return e.backClick(t)}}})],1)},i=[],o=s("2909"),n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.banners.length?s("swiper",{ref:"mySwiper",staticClass:"home-swiper",attrs:{options:e.swiperOptions}},[e._l(e.banners,(function(t){return s("swiper-slide",[s("a",{attrs:{href:t.link}},[s("img",{attrs:{src:t.image,alt:""},on:{load:e.swiperImageLoad}})])])})),s("div",{staticClass:"swiper-pagination",attrs:{slot:"pagination"},slot:"pagination"})],2):e._e()},r=[],c=s("7212"),l=(s("bbe3"),s("6d3b")),d=s("8343"),p=s("5dc8"),u=s("d17a");l["a"].use([d["a"],p["a"],u["a"]]);var m={data:function(){return{swiperOptions:{pagination:{el:".swiper-pagination",clickable:!0},autoplay:{delay:2e3,disableOnInteraction:!1},loop:!0}}},props:{banners:{type:Array}},components:{Swiper:c["Swiper"],SwiperSlide:c["SwiperSlide"]},directives:{swiper:c["directive"]},methods:{swiperImageLoad:function(){this.isFinished||(this.isFinished=!0,this.$emit("swiperImageLoad"))}}},f=m,h=(s("4d88"),s("2877")),b=Object(h["a"])(f,n,r,!1,null,"6c0c0ce3",null),w=b.exports,g=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"recommend"},e._l(e.recommend,(function(t){return s("div",{staticClass:"recommend-item"},[s("a",{attrs:{href:t.link}},[s("img",{attrs:{src:t.image,alt:""}}),s("div",[e._v(e._s(t.title))])])])})),0)},v=[],k={name:"RecommendView",props:{recommend:{type:Array,default:function(){return[]}}}},C=k,T=(s("2681"),Object(h["a"])(C,g,v,!1,null,"217ff77f",null)),$=T.exports,_=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},y=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"feature"},[a("a",{attrs:{href:"https://act.mogujie.com/zzlx67"}},[a("img",{attrs:{src:s("5cbe"),alt:""}})])])}],S={name:"FeatureView"},x=S,O=(s("ccc5"),Object(h["a"])(x,_,y,!1,null,"23f01d16",null)),I=O.exports,H=s("a7ac"),L=s("9bd0"),j=s("6d71"),F=s("5d17"),G=s("1bab");function E(){return Object(G["a"])({url:"/home/multidata"})}function B(e,t){return Object(G["a"])({url:"/home/data",params:{type:e,page:t}})}var M=s("eecb"),V={name:"Home",components:{TabControl:L["a"],NavBar:H["a"],HomeSwiper:w,RecommendView:$,FeatureView:I,GoodsList:j["a"],Scroll:F["a"]},mixins:[M["b"],M["a"]],data:function(){return{banners:[],recommend:[],goods:{pop:{page:0,list:[]},new:{page:0,list:[]},sell:{page:0,list:[]}},currentType:"pop",isTabFixed:!1,tabOffsetTop:0,saveY:0}},created:function(){this.getHomeMultiData(),this.getHomeGoods("pop"),this.getHomeGoods("new"),this.getHomeGoods("sell")},mounted:function(){window.scroll=this.$refs.scroll},activated:function(){this.$refs.scroll.scrollTo(0,this.saveY,3e3),this.$refs.scroll.refresh()},deactivated:function(){this.saveY=this.$refs.scroll.getScrollY(),this.$bus.$off("itemImageLoad",this.itemImageLoad)},methods:{tabClick:function(e){switch(e){case 0:this.currentType="pop";break;case 1:this.currentType="new";break;case 2:this.currentType="sell";break}this.$refs.tabControl1.currentIndex=e,this.$refs.tabControl2.currentIndex=e},swiperImageLoad:function(){this.tabOffsetTop=this.$refs.tabControl2.$el.offsetTop,this.$refs.scroll.refresh()},loadMore:function(){this.getHomeGoods(this.currentType)},contentScroll:function(e){this.listenShowBackTop(e),this.isTabFixed=-e.y>this.tabOffsetTop},getHomeMultiData:function(){var e=this;E().then((function(t){e.banners=t.data.banner.list,e.recommend=t.data.recommend.list}))},getHomeGoods:function(e){var t=this,s=this.goods[e].page+1;B(e,s).then((function(s){var a;(a=t.goods[e].list).push.apply(a,Object(o["a"])(s.data.list)),t.goods[e].page+=1,t.$refs.scroll.finishPullUp()}))}},computed:{showGoods:function(){return this.goods[this.currentType].list}}},Y=V,N=(s("ba1e"),Object(h["a"])(Y,a,i,!1,null,"063de381",null));t["default"]=N.exports},ba1e:function(e,t,s){"use strict";var a=s("0ea1"),i=s.n(a);i.a},ccc5:function(e,t,s){"use strict";var a=s("dce7"),i=s.n(a);i.a},dce7:function(e,t,s){}}]);
//# sourceMappingURL=chunk-3447a539.dac3cca1.js.map