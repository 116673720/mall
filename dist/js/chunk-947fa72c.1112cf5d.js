(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-947fa72c"],{"02fa":function(t,e,n){},"28c5":function(t,e,n){},"2f48":function(t,e,n){"use strict";var i=n("02fa"),s=n.n(i);s.a},5691:function(t,e,n){"use strict";var i=n("a8f6"),s=n.n(i);s.a},"5ebe":function(t,e,n){},"69c3":function(t,e,n){"use strict";var i=n("5ebe"),s=n.n(i);s.a},"99af":function(t,e,n){"use strict";var i=n("23e7"),s=n("d039"),r=n("e8b5"),a=n("861d"),o=n("7b0b"),u=n("50c4"),c=n("8418"),l=n("65f0"),d=n("1dde"),m=n("b622"),f=n("2d00"),h=m("isConcatSpreadable"),g=9007199254740991,b="Maximum allowed index exceeded",p=f>=51||!s((function(){var t=[];return t[h]=!1,t.concat()[0]!==t})),v=d("concat"),L=function(t){if(!a(t))return!1;var e=t[h];return void 0!==e?!!e:r(t)},y=!p||!v;i({target:"Array",proto:!0,forced:y},{concat:function(t){var e,n,i,s,r,a=o(this),d=l(a,0),m=0;for(e=-1,i=arguments.length;e<i;e++)if(r=-1===e?a:arguments[e],L(r)){if(s=u(r.length),m+s>g)throw TypeError(b);for(n=0;n<s;n++,m++)n in r&&c(d,m,r[n])}else{if(m>=g)throw TypeError(b);c(d,m++,r)}return d.length=m,d}})},a2fd:function(t,e,n){"use strict";var i=n("28c5"),s=n.n(i);s.a},a8f6:function(t,e,n){},bb51:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"category"}},[n("nav-bar",{staticClass:"nav-bar"},[n("div",{attrs:{slot:"center"},slot:"center"},[t._v("商品分类")])]),n("div",{staticClass:"category-content"},[n("category-menu",{staticClass:"category-menu",attrs:{menuList:t.menuList},on:{itemClick:t.getSubMenuList}}),n("scroll",{ref:"scroll",staticClass:"scroll",attrs:{data:[t.menuDetail]}},[n("category-sub-menu",{attrs:{subMenuList:t.showSubMenuList},on:{imgLoad:t.imgLoad}}),n("tab-control",{ref:"tabControl",attrs:{titles:["综合","新品","销量"]},on:{tabClick:t.tabClick}}),n("category-goods-list",{attrs:{goodsList:t.showGoodsList}})],1)],1)],1)},s=[],r=n("2909"),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.menuList.length?n("div",{staticClass:"category-menu"},[n("scroll",{staticClass:"menu-scroll"},t._l(t.menuList,(function(e,i){return n("div",{staticClass:"menu-item",class:{active:i===t.currentIndex},on:{click:function(e){return t.itemClick(i)}}},[t._v(" "+t._s(e.title)+" ")])})),0)],1):t._e()},o=[],u=n("5d17"),c={name:"CategoryMenu",components:{Scroll:u["a"]},data:function(){return{currentIndex:0}},props:{menuList:{type:Array,default:function(){return[]}}},methods:{itemClick:function(t){this.currentIndex=t,this.$emit("itemClick",t)}}},l=c,d=(n("5691"),n("2877")),m=Object(d["a"])(l,a,o,!1,null,"5e3cd76c",null),f=m.exports,h=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.subMenuList.length?n("grid-view",{attrs:{columns:3,"item-v-margin":15,"v-padding":20}},t._l(t.subMenuList,(function(e,i){return n("div",{key:i,staticClass:"content-item"},[n("a",{attrs:{href:e.link}},[n("img",{staticClass:"item-img",attrs:{src:e.image},on:{load:t.imgLoad}}),n("div",{staticClass:"item-text"},[t._v(t._s(e.title))])])])})),0):t._e()},g=[],b=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"grid-view"},[t._t("default")],2)},p=[],v=(n("99af"),n("a9e3"),n("4795"),{name:"GridView",props:{columns:{type:Number,default:2},vPadding:{type:Number,default:8},hPadding:{type:Number,default:8},itemVMargin:{type:Number,default:8},itemHMargin:{type:Number,default:8}},mounted:function(){var t=this;setTimeout((function(){t.autoLayout()}),20)},updated:function(){this.autoLayout()},methods:{autoLayout:function(){var t=this.$el,e=t.children;t.style.padding="".concat(this.vPadding,"px ").concat(this.hPadding,"px");for(var n=(t.clientWidth-2*this.hPadding-(this.columns-1)*this.itemHMargin)/this.columns,i=0;i<e.length;i++){var s=e[i];s.style.width=n+"px",(i+1)%this.columns!==0&&(s.style.marginRight=this.itemHMargin+"px"),i+1>this.columns&&(s.style.marginTop=this.itemVMargin+"px")}}}}),L=v,y=(n("2f48"),Object(d["a"])(L,b,p,!1,null,"028b0141",null)),x=y.exports,C={name:"CategorySubMenu",components:{GridView:x},data:function(){return{test:!1}},props:{subMenuList:{type:Array,default:function(){return[]}}},methods:{imgLoad:function(){this.$emit("imgLoad")}}},w=C,M=(n("a2fd"),Object(d["a"])(w,h,g,!1,null,"6145663e",null)),_=M.exports,k=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.goodsList.length?n("grid-view",t._l(t.goodsList,(function(t,e){return n("goods-list-item",{key:e,attrs:{"goods-item":t}})})),1):t._e()},I=[],$=n("9977"),G={name:"CategoryGoodsList",props:{goodsList:{type:Array,default:function(){return[]}}},components:{GoodsListItem:$["a"],GridView:x}},D=G,S=Object(d["a"])(D,k,I,!1,null,"1f1a6fc4",null),T=S.exports,j=n("a7ac"),O=n("9bd0"),E=n("1bab");function N(){return Object(E["a"])({url:"/category"})}function P(t){return Object(E["a"])({url:"/subcategory",params:{maitKey:t}})}function V(t,e){return Object(E["a"])({url:"/subcategory/detail",params:{miniWallkey:t,type:e}})}var A=n("eecb"),Y=(n("90b9"),n("6d71")),H={name:"Category",mixins:[A["b"]],components:{GoodsList:Y["a"],CategoryMenu:f,CategorySubMenu:_,CategoryGoodsList:T,NavBar:j["a"],Scroll:u["a"],TabControl:O["a"]},data:function(){return{menuList:[],menuDetail:[],currentIndex:-1,currentType:"pop",saveY:0}},activated:function(){this.$refs.scroll.scrollTo(0,this.saveY,3e3),this.$refs.scroll.refresh()},deactivated:function(){this.saveY=this.$refs.scroll.getScrollY(),this.$bus.$off("itemImageLoad",this.itemImageLoad)},created:function(){this.getMenuList()},mounted:function(){window.scroll=this.$refs.scroll},methods:{imgLoad:function(){this.refresh()},tabClick:function(t){switch(t){case 0:this.currentType="pop";break;case 1:this.currentType="new";break;case 2:this.currentType="sell";break}},getMenuList:function(){var t=this;N().then((function(e){t.menuList=e.data.category.list;for(var n=0;n<t.menuList.length;n++)t.menuDetail[n]={subMenuList:[],goodsList:{pop:[],new:[],sell:[]}};t.getSubMenuList(0)}))},getSubMenuList:function(t){var e=this;this.currentIndex=t;var n=this.menuList[this.currentIndex].maitKey;P(n).then((function(t){e.menuDetail[e.currentIndex].subMenuList=t.data.list,e.menuDetail=Object(r["a"])(e.menuDetail),e.getGoodsList("pop"),e.getGoodsList("new"),e.getGoodsList("sell")}))},getGoodsList:function(t){var e=this,n=this.menuList[this.currentIndex].miniWallkey;V(n,t).then((function(n){e.menuDetail[e.currentIndex].goodsList[t]=n,e.menuDetail=Object(r["a"])(e.menuDetail)}))}},computed:{showSubMenuList:function(){return-1===this.currentIndex?[]:this.menuDetail[this.currentIndex].subMenuList},showGoodsList:function(){return-1===this.currentIndex?[]:this.menuDetail[this.currentIndex].goodsList[this.currentType]}}},W=H,J=(n("69c3"),Object(d["a"])(W,i,s,!1,null,"15d2c6f1",null));e["default"]=J.exports}}]);
//# sourceMappingURL=chunk-947fa72c.1112cf5d.js.map